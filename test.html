<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>Тест пополнения фондового рынка</title>
  
  <script type="text/javascript">

    function getLink(platform) {
      var agreementId = document.getElementById("agreementId").value;
      var invalidMessage = document.getElementById("invalidMessage");
      if (!agreementId || agreementId.length < 5) {
          invalidMessage.style.display = "block";
          return "";
      }
      invalidMessage.style.display = "none";
      
      var prefix = "";
      switch (platform) {
        case 0:
          prefix = "android-app://ru.sberbankmobile/android-app/ru.sberbankmobile/";
          break;
        case 1:
          prefix = "sberbankonline://";
          break;
        default:
          prefix = "https://online.sberbank.ru/app/";
      }
      
      return prefix + "brokerage/transfer?agreement=" + agreementId + "&exchangeMarket=FOND&from=pushtopup&paymentAmount=1&currency=RUB";
    }
    
    function goPay(platform) {
      var link = getLink(platform);
      if (link) {
        window.location = link;
      }
    }

    function copyToClipboard(platform) {
      var link = getLink(platform);
      if (link) {
        navigator.clipboard.writeText(link);
      }
    }
    
  </script>
</head>

<body id="documentation">
  <form action="javascript:void(0)">
    <p><b>Номер догоаора:</b></p>
    <p><input id="agreementId" type="text" maxlength="7" value="" size="10" placeholder="agreement"/></p>
    <p><span style="color:#ff0000;display:none;" id="invalidMessage">Номер договора должен содержать от 5 до 7 символов</span></p>
    <p> </p>
    <p><input type="button" value="Пополнить на Android" onclick="goPay(0)"/><input type="button" value="Скопировать" onclick="copyToClipboard(0)"/></p>
    <p><input type="button" value="Пополнить на iOS" onclick="goPay(1)"/><input type="button" value="Скопировать" onclick="copyToClipboard(1)"/></p>
    <p><input type="button" value="Пополнить через AppLink" onclick="goPay(2)"/><input type="button" value="Скопировать" onclick="copyToClipboard(2)"/></p>
  </form>
</body>
</html>
